(()=>{"use strict";const e=[{title:"Aqua Caelestis",src:"../assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{title:"Ennio Morricone",src:"../assets/sounds/Ennio Morricone.mp3",duration:"03:50"},{title:"Ludovico",src:"../assets/sounds/Ludovico.mp3",duration:"03:50"},{title:"River Flows In You",src:"../assets/sounds/River Flows In You.mp3",duration:"03:50"},{title:"Summer Wind",src:"../assets/sounds/Summer Wind.mp3",duration:"03:50"}],t=document.querySelector("body"),n={greetingLang:{en:"Good",ru:"Добрый"},greetingHolder:{en:"[Entry your name]",ru:"[Введите своё имя]"},wind:{en:"wind speed: ",ru:"скорость ветра: "},humidity:{en:"humidity: ",ru:"влажность: "},town:{en:"[Entry your town]",ru:"[Введите свой город]"}},o=document.querySelector(".select-language");let a;o.addEventListener("change",(function(){let e=o.value;location.href=window.location.pathname+"#"+e,location.reload()})),a=window.location.hash,a=a.substr(1),o.value=a,["en","ru"].includes(a)||(location.href=window.location.pathname+"#en",location.reload());const r=document.querySelector(".time"),c=document.querySelector(".date");!function e(){const t=(new Date).toLocaleTimeString("en-US",{hour12:!1});r.textContent=t,setTimeout(e,1e3)}(),function e(){const t=(new Date).toLocaleDateString(`${a}-Gb`,{weekday:"long",month:"long",day:"numeric",timeZone:"Europe/Minsk"});c.textContent=t,setTimeout(e,1e3)}();let i,s,l,u="";function d(){const e=new Image,n=String(i).padStart(2,"0");e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${u}/${n}.jpg`,e.onload=()=>{t.style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${u}/${n}.jpg')`}}!function(){const e=(new Date).getHours(),t=document.querySelector(".greeting");document.querySelector(".name").placeholder=`${n.greetingHolder[a]}`,u="en"==a?e<6?"night":e<12?"morning":e<18?"afternoon":"evening":e<6?"ночи":e<12?"утро":e<18?"день":"вечер",t.textContent=`${n.greetingLang[a]} ${u}`,u=e<6?"night":e<12?"morning":e<18?"afternoon":"evening"}(),s=Math.ceil(1),l=Math.floor(20),i=Math.floor(Math.random()*(l-s+1))+s,d();const m=document.querySelector(".slide-next"),g=document.querySelector(".slide-prev");m.addEventListener("click",(function(){i=i+1>20?1:i+1,d()})),g.addEventListener("click",(function(){i=i-1<1?20:i-1,d()}));const y=document.querySelector(".weather-icon"),p=document.querySelector(".temperature"),h=document.querySelector(".weather-description"),C=document.querySelector(".city"),v=document.querySelector(".wind"),S=document.querySelector(".humidity");async function f(){const e=`https://api.openweathermap.org/data/2.5/weather?q=${C.value}&lang=${a}&appid=94e79d036c9efc29c9a2c590a84d4fdc&units=metric`,t=await fetch(e),o=await t.json();try{y.className="weather-icon owf",y.classList.add(`owf-${o.weather[0].id}`),p.textContent=`${Math.ceil(o.main.temp)}°C`,h.textContent=o.weather[0].description,v.textContent=`${n.wind[a]} ${Math.ceil(o.wind.speed)} m/c`,S.textContent=`${n.humidity[a]} ${Math.ceil(o.main.humidity)} %`}catch(e){""==C.value?(p.textContent="Error! Nothing to geocode",h.textContent="",v.textContent=" ",S.textContent=""):(y.className="",p.textContent=`Error: city not found for: ${C.value}`,h.textContent="",v.textContent=" ",S.textContent="")}}C.placeholder=n.town[a],f(),C.addEventListener("change",f);const w=document.querySelector(".name");window.addEventListener("load",(function(){localStorage.getItem("name")&&(w.value=localStorage.getItem("name")),localStorage.getItem("city")&&(C.value=localStorage.getItem("city"))})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",w.value),localStorage.setItem("city",C.value)}));const L=document.querySelector(".quote"),q=document.querySelector(".author"),$=document.querySelector(".change-quote");async function E(){const e=`data-${a}.json`,t=await fetch(e),n=await t.json(),o=Object.getOwnPropertyNames(n);o.splice([o.length-1],1);const r=Math.floor(Math.random()*o.length),c={};c[o[r]]=n[o[r]];const i=Object.values(c),s=Object.values(i[0]);L.textContent=s[0],q.textContent=s[1]}E(),$.addEventListener("click",E);const x=document.querySelector(".player"),k=document.querySelector(".music-title"),b=document.querySelector(".player__rewind"),I=document.querySelector(".player__volume"),M=document.querySelector(".player__volume-btn"),T=document.querySelector(".play");let j=!1;const _=new Audio;let A=0;T.addEventListener("click",(function(){_.src=e[A].src,_.currentTime=0,!1===j?(_.pause(),_.play(),j=!0,T.classList.add("pause"),b.style.background="linear-gradient(to right, #710707 0%, #710707 0%, #C4C4C4 0%, #C4C4C4 100%)"):(_.pause(),j=!1,T.classList.remove("pause"),b.style.background="linear-gradient(to right, #710707 0%, #710707 0%, #C4C4C4 0%, #C4C4C4 100%)")})),_.addEventListener("loadeddata",(()=>{console.log(_.duration),x.querySelector(".player-time .length").textContent=F(_.duration),_.volume=.5}),!1),setInterval((()=>{x.querySelector(".player-time .current").textContent=F(_.currentTime)}),500);const D=document.querySelector(".play-next"),N=document.querySelector(".play-prev");D.addEventListener("click",(function(){A>3&&(A=-1),A+=1,_.src=e[A].src,_.currentTime=0,_.play(),j=!0,T.classList.add("pause")})),N.addEventListener("click",(function(){A<1&&(A=5),A-=1,_.src=e[A].src,_.currentTime=0,_.play(),j=!0,T.classList.add("pause")}));const O=document.querySelector(".play-list");for(let t=0;t<e.length;t++){const n=document.createElement("li");n.textContent=e[t].title,n.classList.add("play-item"),O.append(n)}const H=document.querySelectorAll(".play-item");function W(){const e=this.value;this.style.background=`linear-gradient(to right, #710707 ${100*e}%, #710707 ${e}%, #C4C4C4 ${e}%, #C4C4C4 100%)`}function F(e){let t=parseInt(e),n=parseInt(t/60);t-=60*n;const o=parseInt(n/60);return n-=60*o,0===o?`${n}:${String(t%60).padStart(2,0)}`:`${String(o).padStart(2,0)}:${n}:${String(t%60).padStart(2,0)}`}H[A].classList.add("item-active"),k.textContent=e[A].title,x.addEventListener("click",(function(){k.textContent=e[A].title,H.forEach((e=>e.classList.remove("item-active"))),H[A].classList.add("item-active")})),I.addEventListener("input",(function(){let e=this.value;_.volume=e,0!=_.volume?M.classList.remove("mute"):M.classList.add("mute")})),b.addEventListener("input",W),I.addEventListener("input",W),M.addEventListener("click",(function(){0!=_.volume?(_.volume=0,M.classList.add("mute"),I.value=0,I.style.background="linear-gradient(to right, #710707 0%, #710707 0%, #C4C4C4 0%, #C4C4C4 100%)"):(_.volume=.5,M.classList.remove("mute"),I.value=.5,I.style.background="linear-gradient(to right, #710707 50%, #710707 0.5%, #C4C4C4 0.5%, #C4C4C4 100%)")})),_.ontimeupdate=function(){let e=_.duration,t=_.currentTime;b.value=t/e;const n=b.value;b.style.background=`linear-gradient(to right, #710707 ${100*n}%, #710707 ${n}%, #C4C4C4 ${n}%, #C4C4C4 100%)`},b.addEventListener("click",(function(){let e=this.offsetWidth,t=event.offsetX;_.pause(),_.currentTime=_.duration*(t/e),_.play(),T.classList.add("pause")}))})();