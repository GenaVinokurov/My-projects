(()=>{"use strict";const e=[{title:"Aqua Caelestis",src:"../assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{title:"Ennio Morricone",src:"../assets/sounds/Ennio Morricone.mp3",duration:"03:50"},{title:"Ludovico",src:"../assets/sounds/Ludovico.mp3",duration:"03:50"},{title:"River Flows In You",src:"../assets/sounds/River Flows In You.mp3",duration:"03:50"},{title:"Summer Wind",src:"../assets/sounds/Summer Wind.mp3",duration:"03:50"}],t=document.querySelector("body"),n={greetingLang:{en:"Good",ru:"Добрый"},greetingHolder:{en:"[Entry your name]",ru:"[Введите своё имя]"},wind:{en:"wind speed: ",ru:"скорость ветра: "},humidity:{en:"humidity: ",ru:"влажность: "},town:{en:"[Entry your town]",ru:"[Введите свой город]"},lang:{en:"Language",ru:"Язык"},imgApi:{en:"Change img Api",ru:"Изменить источник"},tag:{en:"Change tag",ru:"Изменить тэг"},audio:{en:"Audio player",ru:"Музыкальный плеер"},weather:{en:"Weather",ru:"Погода"},quotes:{en:"Quotes",ru:"Цитаты"},time:{en:"Time",ru:"Время"},date:{en:"Date",ru:"Дата"}},o=document.querySelector(".select-language");let a;o.addEventListener("change",(function(){let e=o.value;location.href=window.location.pathname+"#"+e,location.reload()})),a=window.location.hash,a=a.substr(1),o.value=a,["en","ru"].includes(a)||(location.href=window.location.pathname+"#en",location.reload());const r=document.querySelector(".text-lang"),c=document.querySelector(".text-img"),i=document.querySelector(".text-tag"),s=document.querySelector(".text-audio"),l=document.querySelector(".text-weather"),u=document.querySelector(".text-quotes"),d=document.querySelector(".text-time"),m=document.querySelector(".text-date");r.textContent=`${n.lang[a]}`,c.textContent=`${n.imgApi[a]}`,i.textContent=`${n.tag[a]}`,s.textContent=`${n.audio[a]}`,l.textContent=`${n.weather[a]}`,u.textContent=`${n.quotes[a]}`,d.textContent=`${n.time[a]}`,m.textContent=`${n.date[a]}`;const g=document.querySelector(".time"),h=document.querySelector(".date");!function e(){const t=(new Date).toLocaleTimeString("en-US",{hour12:!1});g.textContent=t,setTimeout(e,1e3)}(),function e(){const t=(new Date).toLocaleDateString(`${a}-Gb`,{weekday:"long",month:"long",day:"numeric",timeZone:"Europe/Minsk"});h.textContent=t,setTimeout(e,1e3)}();let y="";!function(){const e=(new Date).getHours(),t=document.querySelector(".greeting");document.querySelector(".name").placeholder=`${n.greetingHolder[a]}`,y="en"==a?e<6?"night":e<12?"morning":e<18?"afternoon":"evening":e<6?"ночи":e<12?"утро":e<18?"день":"вечер",t.textContent=`${n.greetingLang[a]} ${y}`,y=e<6?"night":e<12?"morning":e<18?"afternoon":"evening"}();let p=document.querySelector(".settings-tag");async function v(){const e=`https://api.unsplash.com/photos/random?orientation=landscape&query=${p.value}&client_id=iJnU4ANf7OMilWcHceHML6-byMSmZ8I6Nxqx092JVak`,n=await fetch(e),o=await n.json(),a=new Image;a.src=`${o.urls.regular}`,a.onload=()=>{t.style.backgroundImage=`url('${o.urls.regular}')`}}async function C(){const e=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=c3c902f067093ae4a02551d80c9a2ebb&tags=${p.value}&extras=url_l&format=json&nojsoncallback=1`,n=await fetch(e),o=await n.json(),a=new Image;let r,c=Math.ceil(1),i=Math.floor(40);r=Math.floor(Math.random()*(i-c+1))+c,a.src=`${o.photos.photo[r].url_l}`,a.onload=()=>{t.style.backgroundImage=`url('${o.photos.photo[r].url_l}')`}}const f=document.querySelector(".select-img");let S,w,L;function q(){const e=new Image,n=String(S).padStart(2,"0");e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${y}/${n}.jpg`,e.onload=()=>{t.style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${y}/${n}.jpg')`}}f.addEventListener("change",(function(){"github"===f.value&&q(),"unsplash"===f.value&&v(),"flickr"===f.value&&C()})),p.addEventListener("change",(function(){"unsplash"===f.value&&v(),"flickr"===f.value&&C()})),w=Math.ceil(1),L=Math.floor(20),S=Math.floor(Math.random()*(L-w+1))+w;const x=document.querySelector(".slide-next"),$=document.querySelector(".slide-prev");x.addEventListener("click",(function(){"github"===f.value?(S=S+1>20?1:S+1,q()):"unsplash"===f.value?v():"flickr"===f.value&&C()})),$.addEventListener("click",(function(){"github"===f.value?(S=S-1<1?20:S-1,q()):"unsplash"===f.value?v():"flickr"===f.value&&C()}));const E=document.querySelector(".weather-icon"),b=document.querySelector(".temperature"),k=document.querySelector(".weather-description"),I=document.querySelector(".city"),M=document.querySelector(".wind"),j=document.querySelector(".humidity");async function A(){const e=`https://api.openweathermap.org/data/2.5/weather?q=${I.value}&lang=${a}&appid=94e79d036c9efc29c9a2c590a84d4fdc&units=metric`,t=await fetch(e),o=await t.json();try{E.className="weather-icon owf",E.classList.add(`owf-${o.weather[0].id}`),b.textContent=`${Math.ceil(o.main.temp)}°C`,k.textContent=o.weather[0].description,M.textContent=`${n.wind[a]} ${Math.ceil(o.wind.speed)} m/c`,j.textContent=`${n.humidity[a]} ${Math.ceil(o.main.humidity)} %`}catch(e){""==I.value?(b.textContent="Error! Nothing to geocode",k.textContent="",M.textContent=" ",j.textContent=""):(E.className="",b.textContent=`Error: city not found for: ${I.value}`,k.textContent="",M.textContent=" ",j.textContent="")}}I.placeholder=n.town[a],A(),I.addEventListener("change",A);const _=document.querySelector(".name"),T=document.querySelector(".quote"),N=document.querySelector(".author"),B=document.querySelector(".change-quote");async function D(){const e=`data-${a}.json`,t=await fetch(e),n=await t.json(),o=Object.getOwnPropertyNames(n);o.splice([o.length-1],1);const r=Math.floor(Math.random()*o.length),c={};c[o[r]]=n[o[r]];const i=Object.values(c),s=Object.values(i[0]);T.textContent=s[0],N.textContent=s[1]}D(),B.addEventListener("click",D);const H=document.querySelector(".player"),O=document.querySelector(".music-title"),W=document.querySelector(".player__rewind"),P=document.querySelector(".player__volume"),F=document.querySelector(".player__volume-btn"),G=document.querySelector(".play");let J=!1;const R=new Audio;let U=0;G.addEventListener("click",(function(){R.src=e[U].src,R.currentTime=0,!1===J?(R.pause(),R.play(),J=!0,G.classList.add("pause"),W.style.background="linear-gradient(to right, #710707 0%, #710707 0%, #C4C4C4 0%, #C4C4C4 100%)"):(R.pause(),J=!1,G.classList.remove("pause"),W.style.background="linear-gradient(to right, #710707 0%, #710707 0%, #C4C4C4 0%, #C4C4C4 100%)")})),R.addEventListener("loadeddata",(()=>{console.log(R.duration),H.querySelector(".player-time .length").textContent=z(R.duration),R.volume=.5}),!1),setInterval((()=>{H.querySelector(".player-time .current").textContent=z(R.currentTime)}),500);const Y=document.querySelector(".play-next"),Z=document.querySelector(".play-prev");Y.addEventListener("click",(function(){U>3&&(U=-1),U+=1,R.src=e[U].src,R.currentTime=0,R.play(),J=!0,G.classList.add("pause")})),Z.addEventListener("click",(function(){U<1&&(U=5),U-=1,R.src=e[U].src,R.currentTime=0,R.play(),J=!0,G.classList.add("pause")}));const Q=document.querySelector(".play-list");for(let t=0;t<e.length;t++){const n=document.createElement("li");n.textContent=e[t].title,n.classList.add("play-item"),Q.append(n)}const V=document.querySelectorAll(".play-item");function X(){const e=this.value;this.style.background=`linear-gradient(to right, #710707 ${100*e}%, #710707 ${e}%, #C4C4C4 ${e}%, #C4C4C4 100%)`}function z(e){let t=parseInt(e),n=parseInt(t/60);t-=60*n;const o=parseInt(n/60);return n-=60*o,0===o?`${n}:${String(t%60).padStart(2,0)}`:`${String(o).padStart(2,0)}:${n}:${String(t%60).padStart(2,0)}`}V[U].classList.add("item-active"),O.textContent=e[U].title,H.addEventListener("click",(function(){O.textContent=e[U].title,V.forEach((e=>e.classList.remove("item-active"))),V[U].classList.add("item-active")})),P.addEventListener("input",(function(){let e=this.value;R.volume=e,0!=R.volume?F.classList.remove("mute"):F.classList.add("mute")})),W.addEventListener("input",X),P.addEventListener("input",X),F.addEventListener("click",(function(){0!=R.volume?(R.volume=0,F.classList.add("mute"),P.value=0,P.style.background="linear-gradient(to right, #710707 0%, #710707 0%, #C4C4C4 0%, #C4C4C4 100%)"):(R.volume=.5,F.classList.remove("mute"),P.value=.5,P.style.background="linear-gradient(to right, #710707 50%, #710707 0.5%, #C4C4C4 0.5%, #C4C4C4 100%)")})),R.ontimeupdate=function(){let e=R.duration,t=R.currentTime;W.value=t/e;const n=W.value;W.style.background=`linear-gradient(to right, #710707 ${100*n}%, #710707 ${n}%, #C4C4C4 ${n}%, #C4C4C4 100%)`},W.addEventListener("click",(function(){let e=this.offsetWidth,t=event.offsetX;R.pause(),R.currentTime=R.duration*(t/e),R.play(),G.classList.add("pause")}));const K=document.querySelector(".settings-btn"),ee=document.querySelector(".settings-wrapper");K.addEventListener("click",(function(){ee.classList.toggle("js-act")}));const te=document.getElementById("1"),ne=document.getElementById("2"),oe=document.getElementById("3"),ae=document.getElementById("4"),re=document.getElementById("5"),ce=document.querySelector(".weather"),ie=document.querySelector(".quote-wrapper");function se(){te.checked?H.classList.add("disabled"):H.classList.remove("disabled")}function le(){ne.checked?ce.classList.add("disabled"):ce.classList.remove("disabled")}function ue(){oe.checked?ie.classList.add("disabled"):ie.classList.remove("disabled")}function de(){ae.checked?g.classList.add("disabled"):g.classList.remove("disabled")}function me(){re.checked?h.classList.add("disabled"):h.classList.remove("disabled")}te.addEventListener("input",se),ne.addEventListener("input",le),oe.addEventListener("input",ue),ae.addEventListener("input",de),re.addEventListener("input",me),window.addEventListener("load",(function(){localStorage.getItem("name")&&(_.value=localStorage.getItem("name")),localStorage.getItem("city")&&(I.value=localStorage.getItem("city")),localStorage.getItem("imgAPI")&&(f.value=localStorage.getItem("imgAPI"))})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",_.value),localStorage.setItem("city",I.value),localStorage.setItem("imgAPI",f.value)})),window.addEventListener("load",(function(){"github"===f.value&&q(),"unsplash"===f.value&&v(),"flickr"===f.value&&C(),se(),le(),ue(),de(),me()}))})();